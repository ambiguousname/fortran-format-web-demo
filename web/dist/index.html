<!DOCTYPE html>
<html>
	<head>
		<title>Fortran FORMAT Demo</title>
		<link rel="stylesheet" href="style.css"/>
		<script src="style.js"></script>
		<script src="main.js"></script>
		<meta charset="utf-8" />
	</head>
	<body>
		<header class="d-flex flex-wrap justify-content-center mb-2 shadow-sm">
			<div class="navbar navbar-dark">
				<nav class="nav nav-pills">
					<button class="nav-link active" id="share"><i class="bi bi-share"></i> Share</button>
					<a class="nav-link" data-bs-toggle="modal" data-bs-target="#edge-cases-modal" href="#">Limitations</a>
					<a class="nav-link" data-bs-toggle="modal" data-bs-target="#licenses-modal" href="#">Licenses</a>
					<a class="nav-link" href="https://github.com/ambiguousname/fortran-format-web-demo"><i class="bi bi-github"></i> Source Code</a>
				</nav>
			</div>
		</header>
		<main role="main" class="my-3">
			<div class="container">
				<div class="row">
					<div class="col">
						<div class="form-floating">
							<select class="form-select" id="format-type">
								<option selected>Format Specification</option>
								<option>List Directed Formatting</option>
							</select>
							<label for="format-type">Formatting Type</label>
						</div>
						<div class="input-group my-2 code-group align-items-end" id="format-stmt-div">
							<div class="input-group-prepend">
								<code class="input-group-text">10 FORMAT(</code>
							</div>
							<input type="text" class="form-control code-input" value='"Hello World!"' id="format-stmt"/>
							<div class="input-group-append">
								<code class="input-group-text">)</code>
							</div>
						</div>
						<button type="button" class="btn btn-primary w-100" id="run">Run <i class="bi bi-chevron-double-right"></i></button>
					</div>
					<div class="col">
						<div class="container" id="variables">
						</div>
						<button type="button" class="btn btn-secondary w-100" id="add-variable"> <i class="bi bi-plus-lg"></i> Add variable</button>
					</div>
				</div>
				<div class="row border rounded-3 bg-light my-2 py-1">
					<h1>Statement</h1>
					<code id="stmt-text">
					10 FORMAT(A)
					<br>
					WRITE(*, 10)</code>
					<h1>Output</h1>
					<code class="bg-dark" id="output-text">
						_
					</code>
				</div>
			</div>
		</main>
		<div class="modal fade" id="edge-cases-modal">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">
					<div class="modal-header">
						<h4 class="modal-title">Limitations</h4>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body">
						<h5>Flang-RT</h5>
						<p>
							This demo uses a modified version of <a href="https://github.com/llvm/llvm-project/tree/release/20.x/flang/include">Flang-RT <code>20.1.7</code></a>. 
							There are no guarantees that every possible call of <code>FORMAT</code> will be valid in this demo. The aim is to capture most general uses of <code>FORMAT</code> rather than to account for every edge case.
						</p>
						<h5>Comma Linting Unsupported</h5>
						<p>
							The following statement: <br>
							<pre>
10 FORMAT(I2 I2)
WRITE(*, 10) 20, 30
							</pre>
							Will normally produce the Flang compiler error:
							<pre>
error: Expected ',' or ')' in format expression
	10 FORMAT(I2 I2)
							</pre>

							However, the Flang runtime library does not check for the existence of these commas itself when reading through print statements, so neither does this tool.
						</p>
					</div>
				</div>
			</div>
		</div>
		<div class="modal fade" id="licenses-modal">
			<div class="modal-dialog modal-xl">
				<div class="modal-content">
					<div class="modal-header">
						<h4 class="modal-title">Licenses</h4>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body">
						<ul class="nav nav-tabs" id="license-nav" role="tablist">
						</ul>
						<div class="tab-content" id="license-body">
						</div>
					</div>
				</div>
			</div>
		</div>
		<template id="variable-template">
			<link rel="stylesheet" href="style.css"/>
			<div class="row">
				<div class="d-inline-flex">
					<select class="form-select" id="type-select">
						<option selected>Integer</option>
						<option>Real</option>
						<option>Complex</option>
						<option>String</option>
						<option>Logical</option>
					</select>
					<div id="variable-input-container"><input type="number" class="form-control" value="0" step="1"/></div>
					<button type="button" class="btn btn-outline-danger" id="delete"><i class="bi bi-trash"></i></button>
				</div>
			</div>
		</template>
	</body>
</html>