<!DOCTYPE html>
<html>
	<head>
		<title>Fortran FORMAT Demo</title>
		<link rel="stylesheet" href="style.css"/>
		<script src="style.js"></script>
		<script src="main.js"></script>
		<meta charset="utf-8" />
		<link rel="icon" href="https://ambiguous.name/assets/images/Identicon.png?v=1" type="image/x-icon">
	</head>
	<body>
		<header class="d-flex flex-wrap justify-content-center mb-2 shadow-sm">
			<div class="navbar navbar-dark">
				<nav class="nav nav-pills">
					<a class="nav-link" href="#" id="dark-mode"><i class="bi bi-moon" id="dark-mode-icon"></i>Dark Mode</a>
					<a class="nav-link" data-bs-toggle="modal" data-bs-target="#edge-cases-modal" href="#">Limitations</a>
					<a class="nav-link" data-bs-toggle="modal" data-bs-target="#licenses-modal" href="#">Licenses</a>
					<a class="nav-link" href="https://github.com/ambiguousname/fortran-format-web-demo"><i class="bi bi-github"></i> Source Code</a>
				</nav>
			</div>
			<div class="py-2">
				<button class="btn btn-active btn-primary" id="share"><i class="bi bi-share"></i> Share</button>
			</div>
		</header>
		<main role="main" class="my-3">
			<div class="container">
				<div class="row">
					<div class="col" aria-label="Formatting Options">
						<div class="form-floating">
							<select class="form-select" id="format-type">
								<option selected>Format Specification</option>
								<option>List Directed Formatting</option>
							</select>
							<label for="format-type">Formatting Type</label>
						</div>
						<div class="input-group my-2 code-group align-items-end" id="format-stmt-div" aria-label="Format Statement">
							<div class="input-group-prepend">
								<code class="input-group-text"><label for="format-stmt">10 FORMAT(</label></code>
							</div>
							<input type="text" class="form-control code-input" value='"Hello World!"' id="format-stmt"/>
							<div class="input-group-append">
								<code class="input-group-text">)</code>
							</div>
						</div>
						<button type="button" class="btn btn-primary w-100" id="run">Run <i class="bi bi-chevron-double-right"></i></button>
					</div>
					<div class="col" aria-label="Variables">
						<div class="container" id="variables">
						</div>
						<button type="button" class="btn btn-secondary w-100" id="add-variable"> <i class="bi bi-plus-lg"></i> Add variable</button>
					</div>
				</div>
				<div class="row border rounded-3 bg-body-secondary my-2 py-1">
					<h1>Statement</h1>
					<code id="stmt-text">
					10 FORMAT(A)
					<br>
					WRITE(*, 10)</code>
					<h1>Output</h1>
					<pre class="bg-dark" id="output-text">
					</pre>
				</div>
			</div>
		</main>
		<div class="modal fade" id="edge-cases-modal">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">
					<div class="modal-header">
						<h4 class="modal-title">Limitations</h4>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body">
						<h5>Flang-RT</h5>
						<p>
							This demo uses a modified version of <a href="https://github.com/llvm/llvm-project/tree/release/20.x/flang/include">Flang-RT <code>20.1.7</code></a>.
						</p>
						<p>
							Because Flang-RT must support a wide array of FORTRAN standards, not every valid call of <code>FORMAT</code> in this demo will be supported across all versions of FORTRAN. 
						</p>

						<p>
							For instance, the following is unsupported as of FORTRAN 95:
						</p>
						
						<pre>
WRITE(*, "(5HHello)")
						</pre>

						<p>
							But most compilers will still compile the above (albeit with warnings if you set the <code>-std</code> flag).
						</p>
						<h5>Comma Linting Unsupported</h5>
						<p>
							The following statement: <br>
							<pre>
10 FORMAT(I2 I2)
WRITE(*, 10) 20, 30
							</pre>
							Will normally produce the Flang compiler error:
							<pre>
error: Expected ',' or ')' in format expression
	10 FORMAT(I2 I2)
							</pre>

							However, the Flang runtime library does not check for the existence of these commas itself when reading through print statements, so neither does this tool.
						</p>
					</div>
				</div>
			</div>
		</div>
		<div class="modal fade" id="licenses-modal">
			<div class="modal-dialog modal-xl">
				<div class="modal-content">
					<div class="modal-header">
						<h4 class="modal-title">Licenses</h4>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body">
						<ul class="nav nav-tabs" id="license-nav" role="tablist">
						</ul>
						<div class="tab-content" id="license-body">
						</div>
					</div>
				</div>
			</div>
		</div>
		<template id="variable-template">
			<link rel="stylesheet" href="style.css"/>
			<div class="row mb-1">
				<div class="d-inline-flex">
					<select class="form-select" id="type-select" aria-label="Variable Type">
						<option selected>Integer</option>
						<option>Real</option>
						<option>Complex</option>
						<option>String</option>
						<option>Logical</option>
					</select>
					<div id="variable-input-container"><input type="number" class="form-control" value="0" step="1" aria-label="Integer Value"/></div>
					<button type="button" class="btn btn-outline-danger" id="delete"><i class="bi bi-trash"></i></button>
				</div>
			</div>
		</template>
	</body>
</html>